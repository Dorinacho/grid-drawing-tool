<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GridCodeGenius</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <h1>GridCodeGenius</h1>
        
        <!-- Control Panel -->
        <div class="control-panel">
            <div class="control-section">
                <div class="control-row">
                    <div class="grid-controls">
                        <label for="rows">Rows:</label>
                        <input type="number" id="rows" value="22" min="1" max="50">
                        
                        <label for="cols">Columns:</label>
                        <input type="number" id="cols" value="31" min="1" max="50">
                        
                        <button onclick="gridManager.initializeGrid()">Update</button>
                    </div>
                    
                    <div class="color-picker">
                        <label>Color:</label>
                        <input type="color" id="color1" value="#667eea" onchange="gridManager.selectColor(1)">
                        <input type="color" id="color2" value="#f093fb" onchange="gridManager.selectColor(2)">
                        <input type="color" id="color3" value="#4ecdc4" onchange="gridManager.selectColor(3)">
                        <input type="color" id="color4" value="#fce38a" onchange="gridManager.selectColor(4)">
                    </div>
                </div>
                
                <div class="control-row">
                    <button onclick="gridManager.toggleOrientation()">Change Orientation</button>
                    <button onclick="pdfExporter.showExportDialog()">Export to PDF</button>
                    <button onclick="showEraseWarning()">Clear Grid</button>
                </div>
            </div>
        </div>

        <!-- Square size display -->
        <div class="square-size-display" style="text-align:center; margin-bottom:10px;">
            Square size: <span id="squareSizeMM">--</span> mm
        </div>

        <!-- Canvas Container -->
        <div class="canvas-container">
            <canvas id="gridCanvas" width="600" height="400"></canvas>
        </div>

        <div class="info-panel">
            <p>Click on grid cells to paint/unpaint them with selected color. Current orientation: <span id="orientationDisplay">Horizontal</span></p>
        </div>
    </div>

    <!-- PDF Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <h3>Export to PDF</h3>
            <div class="paper-selection">
                <div class="checkbox-group" onclick="pdfExporter.selectPaperSize('A3')">
                    <input type="checkbox" id="paperA3" name="paperSize">
                    <label for="paperA3">A3 (297 × 420 mm)</label>
                </div>
                <div class="checkbox-group" onclick="pdfExporter.selectPaperSize('A4')">
                    <input type="checkbox" id="paperA4" name="paperSize" checked>
                    <label for="paperA4">A4 (210 × 297 mm)</label>
                </div>
                <div class="checkbox-group" onclick="pdfExporter.selectPaperSize('A5')">
                    <input type="checkbox" id="paperA5" name="paperSize">
                    <label for="paperA5">A5 (148 × 210 mm)</label>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="cancel-btn" onclick="pdfExporter.closeExportDialog()">Cancel</button>
                <button onclick="pdfExporter.exportToPDF()">OK</button>
            </div>
        </div>
    </div>

    <!-- Erase Warning Modal -->
    <div id="eraseModal" class="modal">
        <div class="modal-content">
            <h3>Warning</h3>
            <p>Erasing will clear the entire canvas and all your progress will be lost. Are you sure?</p>
            <div class="modal-buttons">
                <button class="cancel-btn" onclick="closeEraseWarning()">Cancel</button>
                <button onclick="confirmErase()">Erase</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Show erase warning modal
        function showEraseWarning() {
            document.getElementById('eraseModal').style.display = 'block';
        }
        // Close erase warning modal
        function closeEraseWarning() {
            document.getElementById('eraseModal').style.display = 'none';
        }
        // Confirm erase and clear grid
        function confirmErase() {
            gridManager.clearGrid();
            closeEraseWarning();
        }
    </script>
</body>
</html>